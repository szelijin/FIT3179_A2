{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 800,
  "height": 550,
  "title": "GDP vs Tourism Receipts (Major Countries)",
  "data": {
    "url": "https://raw.githubusercontent.com/szelijin/FIT3179_A2/refs/heads/main/data/world_tourism_economy_data.csv"
  },
  "params": [
    {
      "name": "Year_selection",
      "bind": {
        "input": "select",
        "options": [2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020],
        "name": "Select Year: "
      },
      "value": 2019
    }
  ],
  "transform": [
    { "filter": "datum.year == Year_selection" },

    {
      "filter": "indexof(['China','France','Germany','Japan','United Kingdom','Italy','Spain','India','Mexico','Canada','Thailand','Australia','Netherlands','Turkey','Singapore','Switzerland','Saudi Arabia','United Arab Emirates','South Korea'], datum.country) >= 0"
    },

    { "filter": "datum.gdp > 0 && datum.tourism_receipts > 0 && datum.tourism_arrivals > 0" },

    { "calculate": "datum.gdp / 1000000000", "as": "GDP_bil" },
    { "calculate": "datum.tourism_receipts / 1000000000", "as": "Receipts_bil" },
    { "calculate": "datum.tourism_arrivals / 1000000", "as": "Arrivals_mil" }
  ],

  "layer": [
    {
      "mark": { "type": "circle", "opacity": 0.8 },
      "encoding": {
        "x": {
          "field": "GDP_bil",
          "type": "quantitative",
          "title": "GDP (USD, billions)",
          "axis": { "grid": true, "format": ".1f" }
        },
        "y": {
          "field": "Receipts_bil",
          "type": "quantitative",
          "title": "Tourism Receipts (USD, billions)",
          "axis": { "grid": true, "format": ".1f" }
        },
        "size": {
          "field": "Arrivals_mil",
          "type": "quantitative",
          "title": "Tourist arrivals (millions)",
          "scale": { "range": [80, 1800] }
        },
        "color": {
          "field": "country",
          "type": "nominal",
          "legend": null
        },
        "tooltip": [
          { "field": "country", "title": "Country" },
          { "field": "GDP_bil", "type": "quantitative", "title": "GDP (USD bil)", "format": ".2f" },
          { "field": "Receipts_bil", "type": "quantitative", "title": "Receipts (USD bil)", "format": ".2f" },
          { "field": "Arrivals_mil", "type": "quantitative", "title": "Arrivals (millions)", "format": ".1f" },
          { "field": "year", "type": "ordinal" }
        ]
      }
    },

    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "middle",
        "dx": 6,
        "fontSize": 11,
        "opacity": 0.9
      },
      "encoding": {
        "x": { "field": "GDP_bil", "type": "quantitative" },
        "y": { "field": "Receipts_bil", "type": "quantitative" },
        "text": { "field": "country", "type": "nominal" },
        "opacity": {
          "condition": { "value": 1, "test": "true" },
          "value": 0.9
        }
      }
    }
  ]
}
